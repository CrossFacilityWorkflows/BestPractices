<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Containers &mdash; Cross Facility Workflows 1.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Persistent Services Platforms" href="persistent_services.html" />
    <link rel="prev" title="Cross Facility Workflows" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Cross Facility Workflows
          </a>
              <div class="version">
                1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Technologies</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Containers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#alcf">ALCF</a></li>
<li class="toctree-l2"><a class="reference internal" href="#nersc">NERSC</a></li>
<li class="toctree-l2"><a class="reference internal" href="#olcf">OLCF</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="persistent_services.html">Persistent Services Platforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="facility_api.html">APIs for Facilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="workflows.html">Workflow Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="identity_management.html">Identity Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_transfer.html">Data Transfer</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_management.html">Data Management</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Use cases</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cctbx.html">Using CCTBX in a Superfacility Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="xpcs.html">Cross-facility Analysis with XPCS</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Research efforts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="team.html">Team</a></li>
<li class="toctree-l1"><a class="reference internal" href="publications.html">Publications</a></li>
<li class="toctree-l1"><a class="reference internal" href="projects.html">Projects</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Cross Facility Workflows</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Containers</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/containers.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="containers">
<span id="id1"></span><h1>Containers<a class="headerlink" href="#containers" title="Permalink to this headline">¶</a></h1>
<p><cite>Containers</cite> are an approach to bundling all of the required files and data for an application as a single file, so the dependencies are fully <cite>contained</cite> and referenced at runtime, removing concerns over changes in underlying system dependencies which can render an application unusable. The resulting container can be moved between systems and still run, since its dependencies are fully satisfied local to the container.</p>
<p>Applications deployed in containers typically run with little to no degradation in performance. This is in line with expectations, and is especially applicable in the context of applications with significant dependence on the filesystem, such as Python applications (which typically load many module files at startup), dynamically linked applications (which need to load shared object files, as opposed to the single-file statically linked applications), and applications with a significant data dependency, where those data dependencies can be included in the container. The reason in all of these cases is that the number of references to files on the remote filesystem is reduced, as they are resolved to the compute node-local container instead.</p>
<section id="alcf">
<span id="alcf-singularity"></span><h2>ALCF<a class="headerlink" href="#alcf" title="Permalink to this headline">¶</a></h2>
<p>ALCF deploys Singularity for use on the Theta system, including both the Intel KNL and NVIDIA A100 nodes. Singularity images can be derived from pre-existing Docker images, or built directly using Singularity recipes. Containerized applications have run successfully on Theta using up to 4096 nodes with Singularity.</p>
<p>Full details about using Singularity at ALCF can be found on the ALCF documentation site, for both <a class="reference external" href="https://www.alcf.anl.gov/support-center/theta/singularity-theta/">Theta</a> and <a class="reference external" href="https://www.alcf.anl.gov/support-center/theta-gpu-nodes/nvidia-containers">ThetaGPU</a>. Further details about Singularity at ALCF are also available in materials from the ALCF Computational Performance workshop, <a class="reference external" href="https://www.alcf.anl.gov/support-center/theta-gpu-nodes/nvidia-containers">here</a>.</p>
</section>
<section id="nersc">
<span id="nersc-shifter"></span><h2>NERSC<a class="headerlink" href="#nersc" title="Permalink to this headline">¶</a></h2>
<p>NERSC has been an early adopter and proponent of containers for scientific and HPC workflows.
This led to the development of
<a class="reference external" href="https://www.nersc.gov/research-and-development/user-defined-images/">Shifter</a>
which is a software package that allows container images created with tools like Docker or Podman to run securely and scalably on large-scale HPC systems.
Using containers with Shifter, users can create an image with their desired operating system and easily
install software stacks and dependencies. With some care these images can be run across different systems assuming architectural compatibility.
Shifter has several novel features that help with scalable launch and leveraging high-performance interconnect and accelerators.
It is currently the best performing option for Python code stacks across multiple nodes.
For full information on using Shifter at NERSC, please see <a class="reference external" href="https://docs.nersc.gov/development/shifter/how-to-use/">this page</a>.</p>
<p>NERSC is also evaluating <a class="reference external" href="https://podman.io/">Podman</a> as an eventual replacement for Shifter.
Podman will allow users to build images directly on the system and integrate more easily with standard container tools.
NERSC is developing enhancements to Podman to enable the same scalable launch features found in Shifter and other HPC container runtimes.</p>
</section>
<section id="olcf">
<h2>OLCF<a class="headerlink" href="#olcf" title="Permalink to this headline">¶</a></h2>
<p>OLCF supports the use of containers on its flagship machine, Summit, and its
data analysis cluster, Andes, through <a class="reference external" href="https://podman.io">Podman</a> and
<a class="reference external" href="https://sylabs.io/singularity">Singularity</a>.</p>
<p>To run containers on Summit, the recommended approach, which is detailed
<a class="reference external" href="https://docs.olcf.ornl.gov/software/containers_on_summit.html">here</a>, is to
build a container image on a Summit login node using Podman, convert it to a
SIF file, and then run the container on Summit’s compute nodes using the
Singularity runtime. Containers can also be built on non-OLCF machines, but
this can be difficult to do because of the relative scarcity of machines with
similar architectures (IBM POWER9 CPU and Nvidia V100 GPU).</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Cross Facility Workflows" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="persistent_services.html" class="btn btn-neutral float-right" title="Persistent Services Platforms" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, ALCF, OLCF, NERSC.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>